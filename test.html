<!DOCTYPE html>

<html>
    <head>
        <title>Audio test</title>
        <script type="text/javascript" src="js/stopwatch.js"></script>

    </head>

    <body>
        <p><span id="watchdisplay">00:00:10</span></p>

        <script>
            var w = new Stopwatch(function(watch) {
                // Listener function
                document.getElementById('watchdisplay').innerHTML = watch.toString()
            } , 1000, false);

            setInterval('loop("bing.mp3", "bong.mp3", 1000*20/10, w)', 1000*60*20/20/6);
            w.setElapsed(0, 00, 10);
            w.start();            

            function loop(soundFile1, soundFile2, delayMilliSec, watch) {
                resetWatch(watch);
                playTwoSoundsWithDelay(soundFile1, soundFile2, delayMilliSec);
            }

            function resetWatch(watch) {
                watch.stop();
                watch.setElapsed(0,0,10);
                watch.start();
                document.getElementById('watchdisplay').innerHTML = watch.toString();
            }

            function playSound(filename){
                var sound=new Audio(filename);
                sound.play();
            }

            function playTwoSoundsWithDelay(soundFile1, soundFile2, delayMilliSec, watch) {
                // Plays the first sound immediately, and the other after 'delay' milliseconds
                playSound(soundFile1);
                setTimeout(function(){
                    playSound(soundFile2);
                }, delayMilliSec);
            }


        </script>
    </body>
</html>
